{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://infinityx.one/schemas/agents/agent_tasks.schema.json",
    "title": "Agent Task",
    "type": "object",
    "additionalProperties": true,
    "properties": {
        "task_id": {
            "type": "string"
        },
        "parent_task_id": {
            "type": "string"
        },
        "session_hash": {
            "type": "string"
        },
        "created_by": {
            "type": "string",
            "enum": [
                "architect",
                "system",
                "operator"
            ]
        },
        "assigned_to": {
            "type": "string",
            "enum": [
                "scout",
                "architect",
                "executor",
                "predictor",
                "memory"
            ]
        },
        "objective": {
            "type": "string"
        },
        "context": {
            "type": "object",
            "additionalProperties": true
        },
        "constraints": {
            "type": "object",
            "additionalProperties": true
        },
        "priority": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10
        },
        "deadline": {
            "type": "string",
            "format": "date-time"
        },
        "handoff_reason": {
            "type": "string"
        },
        "expected_outcome": {
            "type": "string"
        },
        "idempotency_key": {
            "type": "string"
        },
        "status": {
            "type": "string",
            "enum": [
                "queued",
                "in_progress",
                "blocked",
                "done",
                "canceled"
            ]
        },
        "lease": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "owner_agent_id": {
                    "type": "string"
                },
                "expires_at": {
                    "type": "string",
                    "format": "date-time"
                }
            },
            "required": [
                "owner_agent_id",
                "expires_at"
            ]
        },
        "created_at": {
            "type": "string",
            "format": "date-time"
        },
        "updated_at": {
            "type": "string",
            "format": "date-time"
        }
    },
    "required": [
        "task_id",
        "session_hash",
        "created_by",
        "assigned_to",
        "objective",
        "status",
        "idempotency_key",
        "created_at"
    ]
}